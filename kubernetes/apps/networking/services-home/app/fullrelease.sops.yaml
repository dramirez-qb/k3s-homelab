apiVersion: v1
kind: Service
metadata:
    name: test-service
    namespace: networking
spec:
    ports:
        - name: web
          protocol: TCP
          port: ENC[AES256_GCM,data:Vx2Ybw==,iv:ds9SHLxzEx2nQRu6kUFHdfEOvO4km9Br3WpmC71P0bw=,tag:6oIshhsILhVLBD3Qxe0QtQ==,type:int]
          targetPort: ENC[AES256_GCM,data:9X3QLw==,iv:Nr9MGw6gnkYqqhieJLyNtk5Nw6RHnHAVi46j0gzuGp4=,tag:Tl4sl02FLvfywEIxP/mBDQ==,type:int]
    type: ExternalName
    sessionAffinity: None
    externalName: ENC[AES256_GCM,data:DtmCbTfO/Q27hj4=,iv:JjC/Cnc8u0pRrPnXVB3CgahC0gS2/MT3+KQQdt9irTw=,tag:V06Ux3epLGts1VqJYXts1A==,type:str]
    internalTrafficPolicy: Cluster
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
apiVersion: v1
kind: Service
metadata:
    name: home-service
    namespace: networking
spec:
    ports:
        - name: web
          protocol: TCP
          port: ENC[AES256_GCM,data:hOHr5Q==,iv:2LxealRpDd7/v1cWFsymCDa8ZhtynXsXNO/3j8kQwa0=,tag:5Ds1WAk3iwttbonvXTn1eA==,type:int]
          targetPort: ENC[AES256_GCM,data:QtSY1A==,iv:ZmdvP/kH4zMwTsbGORR8qFwSml+nAVT4GrMWa+a/m+8=,tag:PijdCWeoxkZZ/KnPKysveQ==,type:int]
    type: ExternalName
    sessionAffinity: None
    externalName: ENC[AES256_GCM,data:WOZT53Lu4Olw0nY=,iv:q+yqWPodiJZXiDeh/BeU0+CuDo3pSOGhKS3V9snHhgA=,tag:g9/iN1kz2/FoNF9SN0Dr8A==,type:str]
    internalTrafficPolicy: Cluster
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
apiVersion: v1
kind: Service
metadata:
    name: gitlab-service
    namespace: networking
spec:
    ports:
        - protocol: TCP
          name: web
          port: ENC[AES256_GCM,data:MHdnYA==,iv:LJomcR4osPyCW6wAxr3Nmot6lLhdE6IqCiNenOIg0IE=,tag:cygd6E+4dUrbePvFESrQdA==,type:int]
          targetPort: ENC[AES256_GCM,data:9PMjow==,iv:c9sRSjHYQ+gfEg+SZ7EY4PpekAtD7nPGc055LujJM+k=,tag:CnAF/znbZaOHCYvZv58GFw==,type:int]
        - protocol: TCP
          name: registry
          port: ENC[AES256_GCM,data:O/158Q==,iv:omjFxQihQ5GVvtC51v3aAoE+27Sn0WH8k7GOu25PgI4=,tag:sxhVJb/ESGnyM2EV/x+5jw==,type:int]
          targetPort: ENC[AES256_GCM,data:Se4Dlg==,iv:fkodoklo0B2of2DlacJTdn8WnT2QOiTFuIFHuMUhRCI=,tag:RsiuKcY4w9wbb+HIJKVWxQ==,type:int]
        - protocol: TCP
          name: ssh
          port: ENC[AES256_GCM,data:5uffaQ==,iv:9ZVFS4Kzsvj9nkzs8YQ6Uljxoc6yAxPfw3k/fwFQXzg=,tag:ffh5Izc+6cngHhS6LneblQ==,type:int]
          targetPort: ENC[AES256_GCM,data:Q6MEoA==,iv:lG47NRfvkugx7P7ovRaRVYgmxxOeqyymxCI5Gc0vNxA=,tag:yMjzWVSPXx4RDQZ2+87L5Q==,type:int]
    type: ExternalName
    sessionAffinity: None
    externalName: ENC[AES256_GCM,data:pNjKu/X7Aeh3maK56g==,iv:BTLjqTstWzbJkjNzPcxrhPBPGTOyhdpEkPTMJabiDD0=,tag:9mCIe90sDxkTUCoWTgzGHg==,type:str]
    internalTrafficPolicy: Cluster
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
    name: gitlab-ingress
    namespace: networking
    annotations:
        external-dns.alpha.kubernetes.io/target: external.dxas90.xyz
        ingress.kubernetes.io/proxy-body-size: "0"
        ingress.kubernetes.io/ssl-redirect: "true"
        kubernetes.io/tls-acme: "true"
    labels:
        use-http01-solver: "true"
spec:
    ingressClassName: external
    tls:
        - hosts:
            - ENC[AES256_GCM,data:yk17/Mivl5BVVo2bwqIcjbY=,iv:/645GIDhiXNW5kpFTEFi1R9nWHvKZWGB+cD0Zpm8MEY=,tag:ohoLbzAkICy4x3lMpjfptA==,type:str]
          secretName: ENC[AES256_GCM,data:dQaG2rlPU0HPAuk4Ym+AXnxEbqXPng==,iv:6rvaidY6FQC+iC7TI79REvoPghgaPd/spf7rcjRCzuw=,tag:bPeZ/+BKBmL+rhWPfL+pcA==,type:str]
        - hosts:
            - ENC[AES256_GCM,data:lgTbdLqwCKd8K1sFGIm3ZCT97A==,iv:H4xQHXbbNcYSMpj1yTSV9fPm6h0fX+U3pBqd1NWtZBY=,tag:hSL/qLUFUNv1ed9icoONiQ==,type:str]
          secretName: ENC[AES256_GCM,data:mBUPseOS/YJqu3KrTpHPu76ZzlUvrPUMRqc00vQcIQ==,iv:29jTPgYWsUHjpl8Fm4ZQog82mGWQv9uL6AKJTfXSf6g=,tag:y246cCr6yfOT3E3wm+yvSQ==,type:str]
    rules:
        - host: ENC[AES256_GCM,data:Po3NUvnFayP7dFl03T9d6wM=,iv:Ju+jqzc83cg40wfDF4Z6v/8QNOCZYSoftrTyZUAPG1E=,tag:gzV+Ln8rsfXS3ulvreFA/Q==,type:str]
          http:
            paths:
                - path: ENC[AES256_GCM,data:gw==,iv:V1t3td4mmmisZ8lNp6JCAkkgC4CIzcBBXM+V4jcDjAg=,tag:V8znFsilYFWv0TMwEbt5WA==,type:str]
                  pathType: ENC[AES256_GCM,data:7RNDX+cB,iv:uxsP0z+bZl5HJ/PqnF8A/hqSlV+V0K//MX/XyAroEkY=,tag:teegzCPLxMrU6BEgdJeEBA==,type:str]
                  backend:
                    service:
                        name: ENC[AES256_GCM,data:6jt+xnREJ4IhSe50dKc=,iv:2OsOZ1KjdpgS4uY3fNpekg6Yq194qFy22HlgwodS0DA=,tag:qJqJ1d7iMkSr/tag2w2HOw==,type:str]
                        port:
                            number: ENC[AES256_GCM,data:GTJF9A==,iv:TNUvPajFKUQNSJzssWderd4WgXND/5icuu+049xuZdE=,tag:VrOa5/KqNclYlCsb3KVW2A==,type:int]
        - host: ENC[AES256_GCM,data:KANNOdVbby66QBkIk0pUixProA==,iv:WM4JwccmaGFYkKOdOpdmsA5IDLkUInbrYahYTdU6Zdg=,tag:MajLFujdDIw6dww069ljog==,type:str]
          http:
            paths:
                - path: ENC[AES256_GCM,data:3g==,iv:FavamCOHzDJ4BMR5hBX/1Cf6l/QI/k3qBuKPpq4Dz60=,tag:Fk6p4lYkDNnauLi+zo6Zsw==,type:str]
                  pathType: ENC[AES256_GCM,data:aQofEzlM,iv:SU3x7TSu48vfZri5M9sILMWQ+Cte2+0o5DVVAxi7lXo=,tag:myT+78OEz7jCsZ799vMQAQ==,type:str]
                  backend:
                    service:
                        name: ENC[AES256_GCM,data:l770pnvH0MTWHWDw9GA=,iv:sQXjowMHRA9gC7BuaahKniaseAUo9IgRxVXFCp4Ew6U=,tag:23ruXLH7hvZeq1qbmpmtug==,type:str]
                        port:
                            number: ENC[AES256_GCM,data:49eiXQ==,iv:aV3a5u+tsk+OE4VS7+Jm0N1uXpAYfrXafhUX6Tw+tOI=,tag:LHFkUw7RovolCMyFvAw0+w==,type:int]
        - host: ENC[AES256_GCM,data:hCJYqPQnOgg/ycIZADY=,iv:3uvr9g5LDAMZQvRGdWOhpnrSyk/xqHct3XId5iUneZ8=,tag:EElrAvb8HY/BO/+zZRVDvg==,type:str]
          http:
            paths:
                - path: ENC[AES256_GCM,data:rg==,iv:cgOHMZRtY+h/8b6PT6eSR903l9Czmf+bchZc3bFPMAw=,tag:Va52y44Pt9DF499gMJ7nvQ==,type:str]
                  pathType: ENC[AES256_GCM,data:z/N1YNIz,iv:UYclyq9U3g2eQDtIDl0b6ow6x3CgAhl+8rULd6O6PXU=,tag:WynPPNh/QM0RvSJbZyLplA==,type:str]
                  backend:
                    service:
                        name: ENC[AES256_GCM,data:S1A4FkdpbEdHHrR5,iv:t6qHpVsv41HMSyZ3nV7oaRhINUiyQ1sz5wlWi/BC3+s=,tag:ALTivld1Z2MHWPmUIHUotQ==,type:str]
                        port:
                            number: ENC[AES256_GCM,data:LyvSbg==,iv:9v11tyE50UjQVPW1y1x3ECgdhOd8mOS6zVR+60fhMJo=,tag:C8G7+w11T+j8h01HQPmLKg==,type:int]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
    name: home-ingress
    namespace: networking
    annotations:
        external-dns.alpha.kubernetes.io/target: external.dxas90.xyz
        ingress.kubernetes.io/proxy-body-size: "0"
        ingress.kubernetes.io/ssl-redirect: "true"
        konghq.com/override: https-only
        kubernetes.io/tls-acme: "true"
    labels:
        use-http01-solver: "true"
spec:
    ingressClassName: external
    tls:
        - hosts:
            - ENC[AES256_GCM,data:oH2B3uAODBZLRA5wjjP8,iv:itz9Km/9j2xw8I1pFaLkA3xuhX9+j7Faz5cWrCBLCqM=,tag:ws1sEFFQo/aX3nAV5dauXw==,type:str]
          secretName: ENC[AES256_GCM,data:+Xv+6e8IyB1qHkz2guNYAwr5lrE=,iv:n1wRq4rpjTR1RC88JqOZ8To6PBBX/Lmi6qVD363Doik=,tag:yTJuVL3tChjfsFmLf6czYw==,type:str]
    rules:
        - host: ENC[AES256_GCM,data:/k16uutNPD4laLGPUnuY,iv:I3OiRZKNkoHTiTCO4taeJnlx+TIK0e1ID18rAMusF14=,tag:+cMrHZrth8FMsHGrIzoYIg==,type:str]
          http:
            paths:
                - path: ENC[AES256_GCM,data:/Q==,iv:RoSo943OWMeMNnu0tZ596rzRlqHfjTsnDrcweEu+kO4=,tag:AfJPaQKs3e8tPo4vhxv3kQ==,type:str]
                  pathType: ENC[AES256_GCM,data:Eac7rXPOivJtbXCI36/+IhiE9GT1Xw==,iv:xkkwwFETGzF0k6YiTpmkPZgOlnjaAoDfbZOkRE4qK+I=,tag:ynIpIgK0GvSnZfJRtheBZw==,type:str]
                  backend:
                    service:
                        name: ENC[AES256_GCM,data:ddoWF3RGQJU3ZANX,iv:Wt6s4LDLG6yrRupzFagjLa81+G+6YF9kFS7A/HyOrTk=,tag:GKM/1TPBezNGKsyHSELVPg==,type:str]
                        port:
                            number: ENC[AES256_GCM,data:arireQ==,iv:q6Xi57ijuMuWkkdLbUcHutmN0AJkhnf0t5MFRX5SUV8=,tag:jLJiopXQKZ39cd4RWda+pQ==,type:int]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
# Redirect to https
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
    name: web-redirect
    namespace: networking
spec:
    redirectScheme:
        scheme: https
        permanent: true
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
# Latency Check
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
    name: latency-check
    namespace: networking
spec:
    circuitBreaker:
        expression: LatencyAtQuantileMS(50.0) > 100
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
# Enable gzip compression
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
    name: compress
    namespace: networking
spec:
    compress: {}
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
# Here, an average of 100 requests per second is allowed.
# In addition, a burst of 50 requests is allowed.
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
    name: ratelimit
    namespace: networking
spec:
    rateLimit:
        average: 100
        burst: 50
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
    name: custom-headers
    namespace: networking
spec:
    headers:
        customRequestHeaders:
            X-Script-Name: test
            X-Forwarded-Proto: https
        customResponseHeaders:
            X-Custom-Response-Header: value
            X-Forwarded-Proto: https
        hostsProxyHeaders:
            - X-Forwarded-For
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
---
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
    name: secured
    namespace: networking
spec:
    chain:
        middlewares:
            - name: web-redirect
            - name: latency-check
            - name: compress
            - name: ratelimit
            - name: custom-headers
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age17nr093c37k5732q9ksxf2p785wd9fxjej7axzcn66lm6muys0eks9kmzts
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBMUGNtbTZwMFFVdEs5L0h3
            VW1lLzlrSDdtN2ZEVHh6L3BFaFdXTFpmakJBCks5ZFhJRHpNcEhrd0FxMXpvUC9E
            OEJmUUpSSzJNeU40Q2lSeUNlOTltSmsKLS0tIFdiOHB1WHpZMmQ2ZkV5LzNYVSty
            VHl6RVFxdmVnbU9WV2RYUWtFUVRyTXcK9xabNMjK+CfGAgJS0iBm2mufNbR2KUvH
            ejnJN7HVZ+2D8vUt2OBdQqX66zLRaB9IUlXffy96bpu61UR0XqAnfg==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2023-09-06T20:39:29Z"
    mac: ENC[AES256_GCM,data:7hNH04fXgifLk7Q7XkO4Ms5DFI2Qe0oGNhBpFuAmduWUZgZHmlmqpyx0gpfbAJDpY5xphCXv3qFepvqqZPHwZbcb3Zw/48e+R1yz3KwPUtnn1qZB+9Ad9cZYwwtbDbJwcUwEQtvAsiFSqMLXKItUl5WiJViefzGN1IUmA5O9PzY=,iv:puOiqiMBY3TPPgVhB3xR6dPtc00NY00Ks615QWzTHnE=,tag:FqlNd+PX+Euk5v5EndymeQ==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|externalName|tls|rules|value|key|port|targetPort)$
    version: 3.7.3
